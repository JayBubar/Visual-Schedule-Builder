<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Data Creator - Visual Schedule Builder</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .status {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #22c55e;
        }
        .warning {
            background: rgba(255,193,7,0.2);
            border-left: 4px solid #ffc107;
        }
        .error {
            background: rgba(220,53,69,0.2);
            border-left: 4px solid #dc3545;
        }
        button {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        button:disabled {
            background: #6b7280;
            cursor: not-allowed;
            transform: none;
        }
        .log {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { color: #22c55e; }
        .info { color: #3b82f6; }
        .warning-text { color: #fbbf24; }
        .error-text { color: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Visual Schedule Builder - Demo Data Creator</h1>
        
        <div id="currentStatus" class="status">
            <h3>üìä Current Storage Status</h3>
            <div id="statusContent">Analyzing current data...</div>
        </div>

        <button id="analyzeBtn" onclick="analyzeCurrentData()">üîç Analyze Current Data</button>
        <button id="createDemoBtn" onclick="createComprehensiveDemo()" disabled>üöÄ Create Comprehensive Demo Data</button>
        <button id="clearBtn" onclick="clearAllData()" style="background: linear-gradient(135deg, #ef4444, #dc2626);">üóëÔ∏è Clear All Data</button>

        <div id="log" class="log" style="display: none;">
            <div id="logContent"></div>
        </div>
    </div>

    <script>
        let currentData = {};

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const logContent = document.getElementById('logContent');
            
            logDiv.style.display = 'block';
            
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error-text' : 
                           type === 'warning' ? 'warning-text' :
                           type === 'success' ? 'success' : 'info';
            
            logContent.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function analyzeCurrentData() {
            log('üîç Starting comprehensive data analysis...', 'info');
            
            // Check for all possible storage keys
            const allKeys = Object.keys(localStorage);
            const relevantKeys = allKeys.filter(key => 
                key.includes('vsb') || 
                key.includes('student') || 
                key.includes('staff') ||
                key.includes('iep') ||
                key.includes('visual-schedule') ||
                key.includes('unified')
            );

            log(`Found ${relevantKeys.length} relevant storage keys:`, 'info');
            relevantKeys.forEach(key => {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    const type = Array.isArray(data) ? 'array' : typeof data;
                    const count = Array.isArray(data) ? data.length : 
                                 data && typeof data === 'object' ? Object.keys(data).length : 0;
                    log(`  ‚úì ${key}: ${type} (${count} items)`, 'success');
                    currentData[key] = data;
                } catch (error) {
                    log(`  ‚ùå ${key}: Invalid JSON`, 'error');
                }
            });

            // Check for unified data structure
            const unifiedKey = 'visual-schedule-builder-unified-data';
            const hasUnifiedData = localStorage.getItem(unifiedKey) !== null;
            
            if (hasUnifiedData) {
                log('‚úÖ Unified data structure found!', 'success');
                const unified = JSON.parse(localStorage.getItem(unifiedKey));
                log(`  Students: ${unified.students?.length || 0}`, 'info');
                log(`  Staff: ${unified.staff?.length || 0}`, 'info');
                log(`  Goals: ${unified.metadata?.totalGoals || 0}`, 'info');
                log(`  Data Points: ${unified.metadata?.totalDataPoints || 0}`, 'info');
            } else {
                log('‚ö†Ô∏è No unified data structure found', 'warning');
                log('System is running in legacy mode', 'warning');
            }

            // Update status display
            updateStatusDisplay(hasUnifiedData, relevantKeys.length);
            
            // Enable demo creation button
            document.getElementById('createDemoBtn').disabled = false;
            
            log('üìä Analysis complete!', 'success');
        }

        function updateStatusDisplay(hasUnifiedData, keyCount) {
            const statusDiv = document.getElementById('statusContent');
            const statusContainer = document.getElementById('currentStatus');
            
            if (hasUnifiedData) {
                statusContainer.className = 'status';
                statusDiv.innerHTML = `
                    <div style="color: #22c55e; font-weight: bold;">‚úÖ Unified Data System Active</div>
                    <div>Found ${keyCount} storage keys</div>
                    <div>System ready for enhancement</div>
                `;
            } else {
                statusContainer.className = 'status warning';
                statusDiv.innerHTML = `
                    <div style="color: #fbbf24; font-weight: bold;">‚ö†Ô∏è Legacy Data Mode</div>
                    <div>Found ${keyCount} storage keys but no unified structure</div>
                    <div>Recommend creating comprehensive demo data</div>
                `;
            }
        }

        function createComprehensiveDemo() {
            log('üöÄ Creating comprehensive demo data...', 'info');
            
            // Clear existing data first
            log('üßπ Clearing existing data...', 'info');
            Object.keys(localStorage).forEach(key => {
                if (key.includes('vsb') || key.includes('student') || key.includes('staff') || 
                    key.includes('iep') || key.includes('visual-schedule') || key.includes('unified')) {
                    localStorage.removeItem(key);
                    log(`  Removed: ${key}`, 'info');
                }
            });

            // Create comprehensive unified data structure
            const unifiedData = {
                students: [
                    {
                        id: 'student_1753413052705',
                        name: 'Emma Wilson',
                        grade: 'Kindergarten',
                        photo: null,
                        dateCreated: '2025-01-15',
                        workingStyle: 'collaborative',
                        accommodations: ['Visual supports', 'Extra time', 'Movement breaks'],
                        goals: [],
                        parentName: 'Sarah Wilson',
                        parentEmail: 'sarah.wilson@email.com',
                        parentPhone: '(555) 123-4567',
                        isActive: true,
                        behaviorNotes: 'Responds well to positive reinforcement and visual cues',
                        medicalNotes: '',
                        resourceInformation: {
                            attendsResourceServices: true,
                            accommodations: ['Visual supports', 'Extra time', 'Movement breaks'],
                            relatedServices: ['Speech therapy'],
                            allergies: [],
                            medicalNeeds: [],
                            emergencyContact: {
                                name: 'Sarah Wilson',
                                phone: '(555) 123-4567',
                                relationship: 'Mother'
                            }
                        },
                        iepData: {
                            goals: [
                                {
                                    id: 'goal_1753413052706',
                                    studentId: 'student_1753413052705',
                                    domain: 'academic',
                                    title: 'Letter Recognition',
                                    description: 'Will identify uppercase and lowercase letters A-Z',
                                    shortTermObjective: 'Will identify letters A-Z with 80% accuracy over 5 consecutive trials',
                                    measurementType: 'percentage',
                                    criteria: '80% accuracy over 5 consecutive trials',
                                    target: 80,
                                    isActive: true,
                                    priority: 'high',
                                    dateCreated: '2024-01-15',
                                    lastDataPoint: '2025-08-03',
                                    dataPoints: 12,
                                    currentProgress: 75,
                                    linkedActivityIds: ['activity_reading_letters']
                                },
                                {
                                    id: 'goal_1753413052707',
                                    studentId: 'student_1753413052705',
                                    domain: 'academic',
                                    title: 'Sight Word Reading',
                                    description: 'Will read 25 high-frequency sight words',
                                    shortTermObjective: 'Will read sight words with 90% accuracy over 3 consecutive sessions',
                                    measurementType: 'percentage',
                                    criteria: '90% accuracy over 3 consecutive sessions',
                                    target: 90,
                                    isActive: true,
                                    priority: 'high',
                                    dateCreated: '2024-02-01',
                                    lastDataPoint: '2025-08-03',
                                    dataPoints: 8,
                                    currentProgress: 60,
                                    linkedActivityIds: ['activity_sight_words']
                                }
                            ],
                            dataCollection: [
                                {
                                    id: 'data_1753413052708',
                                    goalId: 'goal_1753413052706',
                                    studentId: 'student_1753413052705',
                                    date: '2025-08-03',
                                    time: '9:30 AM',
                                    value: 18,
                                    totalOpportunities: 26,
                                    notes: 'Great improvement with letter B and D',
                                    context: 'Morning reading circle',
                                    activityId: 'activity_reading_letters',
                                    collector: 'Ms. Johnson',
                                    photos: [],
                                    voiceNotes: []
                                },
                                {
                                    id: 'data_1753413052709',
                                    goalId: 'goal_1753413052707',
                                    studentId: 'student_1753413052705',
                                    date: '2025-08-03',
                                    time: '10:15 AM',
                                    value: 15,
                                    totalOpportunities: 25,
                                    notes: 'Struggled with "where" and "when"',
                                    context: 'Individual practice',
                                    activityId: 'activity_sight_words',
                                    collector: 'Ms. Johnson',
                                    photos: [],
                                    voiceNotes: []
                                }
                            ],
                            progressAnalytics: {
                                overallProgress: 68,
                                goalsMet: 0,
                                totalGoals: 2,
                                lastDataCollection: '2025-08-03'
                            }
                        },
                        calendarPreferences: {
                            behaviorCommitments: [
                                {
                                    commitment: 'I will be a good friend',
                                    frequency: 'daily',
                                    linkedIEPGoal: 'goal_social_1'
                                }
                            ],
                            dailyHighlights: [],
                            independentChoices: []
                        },
                        schedulePreferences: {
                            preferredActivities: ['reading', 'art', 'music'],
                            accommodationNeeds: ['visual_supports', 'movement_breaks']
                        }
                    },
                    {
                        id: 'student_1753413052710',
                        name: 'Marcus Johnson',
                        grade: '1st Grade',
                        photo: null,
                        dateCreated: '2025-01-20',
                        workingStyle: 'independent',
                        accommodations: ['Movement breaks', 'Fidget tools', 'Chunked assignments'],
                        goals: [],
                        parentName: 'David Johnson',
                        parentEmail: 'david.johnson@email.com',
                        parentPhone: '(555) 234-5678',
                        isActive: true,
                        behaviorNotes: 'Works best with clear structure and routine',
                        medicalNotes: 'ADHD - takes medication at lunch',
                        resourceInformation: {
                            attendsResourceServices: true,
                            accommodations: ['Movement breaks', 'Fidget tools', 'Chunked assignments'],
                            relatedServices: ['Occupational therapy'],
                            allergies: ['Peanuts'],
                            medicalNeeds: ['ADHD medication'],
                            emergencyContact: {
                                name: 'David Johnson',
                                phone: '(555) 234-5678',
                                relationship: 'Father'
                            }
                        },
                        iepData: {
                            goals: [
                                {
                                    id: 'goal_1753413052711',
                                    studentId: 'student_1753413052710',
                                    domain: 'behavioral',
                                    title: 'Sustained Attention',
                                    description: 'Will maintain attention during instruction',
                                    shortTermObjective: 'Will sit and attend for 15 minutes during group instruction',
                                    measurementType: 'duration',
                                    criteria: '15 minutes sustained attention over 4 out of 5 days',
                                    target: 15,
                                    isActive: true,
                                    priority: 'high',
                                    dateCreated: '2024-01-20',
                                    lastDataPoint: '2025-08-03',
                                    dataPoints: 15,
                                    currentProgress: 85,
                                    linkedActivityIds: ['activity_group_instruction']
                                }
                            ],
                            dataCollection: [
                                {
                                    id: 'data_1753413052712',
                                    goalId: 'goal_1753413052711',
                                    studentId: 'student_1753413052710',
                                    date: '2025-08-03',
                                    time: '11:00 AM',
                                    value: 12,
                                    totalOpportunities: 15,
                                    notes: 'Used fidget cube effectively',
                                    context: 'Math lesson',
                                    activityId: 'activity_group_instruction',
                                    collector: 'Ms. Johnson',
                                    photos: [],
                                    voiceNotes: []
                                }
                            ],
                            progressAnalytics: {
                                overallProgress: 85,
                                goalsMet: 0,
                                totalGoals: 1,
                                lastDataCollection: '2025-08-03'
                            }
                        },
                        calendarPreferences: {
                            behaviorCommitments: [],
                            dailyHighlights: [],
                            independentChoices: []
                        },
                        schedulePreferences: {
                            preferredActivities: ['math', 'science', 'building'],
                            accommodationNeeds: ['movement_breaks', 'fidget_tools']
                        }
                    },
                    {
                        id: 'student_1753413052713',
                        name: 'Sofia Rodriguez',
                        grade: '2nd Grade',
                        photo: null,
                        dateCreated: '2025-01-25',
                        workingStyle: 'collaborative',
                        accommodations: ['AAC device', 'Visual schedule', 'Peer buddy'],
                        goals: [],
                        parentName: 'Maria Rodriguez',
                        parentEmail: 'maria.rodriguez@email.com',
                        parentPhone: '(555) 345-6789',
                        isActive: true,
                        behaviorNotes: 'Enjoys helping other students and responds well to praise',
                        medicalNotes: 'Uses AAC device for communication',
                        resourceInformation: {
                            attendsResourceServices: true,
                            accommodations: ['AAC device', 'Visual schedule', 'Peer buddy'],
                            relatedServices: ['Speech therapy', 'Occupational therapy'],
                            allergies: [],
                            medicalNeeds: ['AAC device maintenance'],
                            emergencyContact: {
                                name: 'Maria Rodriguez',
                                phone: '(555) 345-6789',
                                relationship: 'Mother'
                            }
                        },
                        iepData: {
                            goals: [
                                {
                                    id: 'goal_1753413052714',
                                    studentId: 'student_1753413052713',
                                    domain: 'social-emotional',
                                    title: 'Peer Interaction',
                                    description: 'Will initiate interactions with peers using AAC device',
                                    shortTermObjective: 'Will initiate 3 interactions per day using AAC device',
                                    measurementType: 'frequency',
                                    criteria: '3 interactions per day over 1 week',
                                    target: 3,
                                    isActive: true,
                                    priority: 'medium',
                                    dateCreated: '2024-01-25',
                                    lastDataPoint: '2025-08-03',
                                    dataPoints: 10,
                                    currentProgress: 70,
                                    linkedActivityIds: ['activity_peer_interaction']
                                }
                            ],
                            dataCollection: [
                                {
                                    id: 'data_1753413052715',
                                    goalId: 'goal_1753413052714',
                                    studentId: 'student_1753413052713',
                                    date: '2025-08-03',
                                    time: '2:00 PM',
                                    value: 2,
                                    totalOpportunities: 3,
                                    notes: 'Great progress using "want play" button',
                                    context: 'Free play time',
                                    activityId: 'activity_peer_interaction',
                                    collector: 'Ms. Johnson',
                                    photos: [],
                                    voiceNotes: []
                                }
                            ],
                            progressAnalytics: {
                                overallProgress: 70,
                                goalsMet: 0,
                                totalGoals: 1,
                                lastDataCollection: '2025-08-03'
                            }
                        },
                        calendarPreferences: {
                            behaviorCommitments: [],
                            dailyHighlights: [],
                            independentChoices: []
                        },
                        schedulePreferences: {
                            preferredActivities: ['art', 'music', 'sensory'],
                            accommodationNeeds: ['aac_device', 'visual_supports']
                        }
                    }
                ],
                staff: [
                    {
                        id: 'staff_1753413052716',
                        name: 'Ms. Johnson',
                        role: 'Special Education Teacher',
                        email: 'johnson@school.edu',
                        phone: '(555) 123-4567',
                        photo: null,
                        isActive: true,
                        dateCreated: '2023-08-15',
                        specialties: ['Autism Support', 'Behavior Management', 'IEP Writing'],
                        notes: 'Lead teacher with 8 years experience in special education',
                        isResourceTeacher: false,
                        isRelatedArtsTeacher: false,
                        permissions: {
                            canEditStudents: true,
                            canViewReports: true,
                            canManageGoals: true
                        }
                    },
                    {
                        id: 'staff_1753413052717',
                        name: 'Mr. Rodriguez',
                        role: 'Paraprofessional',
                        email: 'rodriguez@school.edu',
                        phone: '(555) 234-5678',
                        photo: null,
                        isActive: true,
                        dateCreated: '2024-01-08',
                        specialties: ['Math Support', 'Individual Assistance', 'Crisis De-escalation'],
                        notes: 'Excellent with one-on-one instruction and behavioral support',
                        isResourceTeacher: false,
                        isRelatedArtsTeacher: false,
                        permissions: {
                            canEditStudents: false,
                            canViewReports: true,
                            canManageGoals: false
                        }
                    },
                    {
                        id: 'staff_1753413052718',
                        name: 'Dr. Williams',
                        role: 'Speech-Language Pathologist',
                        email: 'williams@school.edu',
                        phone: '(555) 345-6789',
                        photo: null,
                        isActive: true,
                        dateCreated: '2022-09-01',
                        specialties: ['Speech Therapy', 'AAC Devices', 'Language Development'],
                        notes: 'Specialist in augmentative and alternative communication',
                        isResourceTeacher: true,
                        isRelatedArtsTeacher: false,
                        permissions: {
                            canEditStudents: false,
                            canViewReports: true,
                            canManageGoals: true
                        }
                    },
                    {
                        id: 'staff_1753413052719',
                        name: 'Mrs. Chen',
                        role: 'Art Teacher',
                        email: 'chen@school.edu',
                        phone: '(555) 456-7890',
                        photo: null,
                        isActive: true,
                        dateCreated: '2023-01-15',
                        specialties: ['Art Therapy', 'Creative Expression', 'Fine Motor Skills'],
                        notes: 'Comes to classroom for weekly art sessions',
                        isResourceTeacher: false,
                        isRelatedArtsTeacher: true,
                        permissions: {
                            canEditStudents: false,
                            canViewReports: false,
                            canManageGoals: false
                        }
                    }
                ],
                activities: [
                    {
                        id: 'activity_reading_letters',
                        name: 'Letter Recognition Practice',
                        category: 'academic',
                        description: 'Interactive letter identification activities',
                        duration: 15,
                        materials: ['Letter cards', 'Whiteboard', 'Markers'],
                        instructions: 'Show letter cards and have student identify',
                        adaptations: ['Use larger letters', 'Provide verbal cues'],
                        linkedGoalIds: ['goal_1753413052706'],
                        isCustom: false,
                        dateCreated: '2024-01-01'
                    },
                    {
                        id: 'activity_sight_words',
                        name: 'Sight Word Practice',
                        category: 'academic',
                        description: 'High-frequency word recognition',
                        duration: 20,
                        materials: ['Sight word cards', 'Flashlight', 'Word games'],
                        instructions: 'Practice reading sight words in isolation',
                        adaptations: ['Use pictures', 'Add gestures'],
                        linkedGoalIds: ['goal_1753413052707'],
                        isCustom: false,
                        dateCreated: '2024-01-01'
                    },
                    {
                        id: 'activity_group_instruction',
                        name: 'Group Instruction Time',
                        category: 'behavioral',
                        description: 'Structured learning time with attention goals',
                        duration: 15,
                        materials: ['Fidget tools', 'Visual schedule', 'Timer'],
                        instructions: 'Deliver instruction while monitoring attention',
                        adaptations: ['Movement breaks', 'Visual cues'],
                        linkedGoalIds: ['goal_1753413052711'],
                        isCustom: false,
                        dateCreated: '2024-01-01'
                    }
                ],
                calendar: {
                    behaviorCommitments: [],
                    dailyHighlights: [],
                    independentChoices: []
                },
                settings: {
                    visualScheduleBuilderSettings: {
                        theme: 'default',
                        notifications: true,
                        autoSave: true
                    }
                },
                metadata: {
                    version: '2.0',
                    migratedAt: new Date().toISOString(),
                    totalGoals: 4,
                    totalDataPoints: 4,
                    totalStaff: 4,
                    totalActivities: 3
                }
            };

            // Save the unified data structure
            const unifiedKey = 'visual-schedule-builder-unified-data';
            localStorage.setItem(unifiedKey, JSON.stringify(unifiedData));
            log(`‚úÖ Created unified data structure: ${unifiedKey}`, 'success');

            // Create additional legacy compatibility data
            localStorage.setItem('students', JSON.stringify(unifiedData.students));
            log('‚úÖ Created legacy students data', 'success');

            localStorage.setItem('staff_members', JSON.stringify(unifiedData.staff));
            log('‚úÖ Created staff members data', 'success');

            // Create individual IEP data for backward compatibility
            const allGoals = [];
            const allDataPoints = [];
            
            unifiedData.students.forEach(student => {
                allGoals.push(...student.iepData.goals);
                allDataPoints.push(...student.iepData.dataCollection);
            });

            localStorage.setItem('iepGoals', JSON.stringify(allGoals));
            localStorage.setItem('iepDataPoints', JSON.stringify(allDataPoints));
            log(`‚úÖ Created IEP compatibility data: ${allGoals.length} goals, ${allDataPoints.length} data points`, 'success');

            // Summary
            log('üéâ COMPREHENSIVE DEMO DATA CREATED SUCCESSFULLY!', 'success');
            log(`üìä Summary:`, 'info');
            log(`  üë• Students: ${unifiedData.students.length}`, 'success');
            log(`  üë®‚Äçüè´ Staff: ${unifiedData.staff.length}`, 'success');
            log(`  üéØ IEP Goals: ${unifiedData.metadata.totalGoals}`, 'success');
            log(`  üìà Data Points: ${unifiedData.metadata.totalDataPoints}`, 'success');
            log(`  üé® Activities: ${unifiedData.metadata.totalActivities}`, 'success');
            
            log('‚ú® Your Visual Schedule Builder now has comprehensive demo data!', 'success');
            log('üîÑ Refresh your application to see the changes.', 'info');

            // Update status display
            updateStatusDisplay(true, Object.keys(localStorage).filter(key => 
                key.includes('vsb') || key.includes('student') || key.includes('staff') || 
                key.includes('iep') || key.includes('visual-schedule') || key.includes('unified')
            ).length);
        }

        function clearAllData() {
            if (!confirm('‚ö†Ô∏è This will permanently delete ALL Visual Schedule Builder data. Are you sure?')) {
                return;
            }

            log('üóëÔ∏è Clearing all Visual Schedule Builder data...', 'warning');
            
            let deletedCount = 0;
            Object.keys(localStorage).forEach(key => {
                if (key.includes('vsb') || key.includes('student') || key.includes('staff') || 
                    key.includes('iep') || key.includes('visual-schedule') || key.includes('unified')) {
                    localStorage.removeItem(key);
                    log(`  Deleted: ${key}`, 'info');
                    deletedCount++;
                }
            });

            log(`‚úÖ Cleared ${deletedCount} storage keys`, 'success');
            log('üîÑ Refresh your application to see the changes.', 'info');

            // Update status display
            updateStatusDisplay(false, 0);
            
            // Disable demo creation button
            document.getElementById('createDemoBtn').disabled = true;
        }

        // Auto-analyze on page load
        window.addEventListener('load', () => {
            setTimeout(analyzeCurrentData, 500);
        });
    </script>
</body>
</html>
                